<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type="text/babel">
// this is the dynamitab.js class file..

// this is a class definition for a Tab. Tabs can be added to TabView objects.
class Tab {
  constructor(tabview, id, title, selected=false, description=undefined) {
    this._id = id;
    this.title = title;
    this.selected = selected;
    this.description = description;
    
    this.class_prefix = tabview.class_prefix;
    this.tabview_id = tabview.id;
    this.panel_heading_level = tabview.panel_heading_level;
    this.tab_id = tabview.id + "-tab" + id;
    this.tab_class = tabview.class_prefix + "-tab";
    this.panel_id = tabview.id + "-panel" + id;
    this.panel_class = tabview.class_prefix + "-panel";
  }
  
  get id() {
    return this._id;
  }
  set id(value) {
    this._id = value;
    this.tab_id = this.tabview_id + "-tab" + value;
    this.panel_id = this.tabview_id + "-panel" + value;
  }
  
  get tab_element() {
    var tabobj = document.createElement("li");
    tabobj.setAttribute("role", "tab");
    tabobj.setAttribute("id", this.tab_id);
    tabobj.setAttribute("class", this.tab_class);
    tabobj.setAttribute("tabindex", "0");
    tabobj.setAttribute("aria-selected", this.selected.toString());
    tabobj.setAttribute("aria-controls", this.panel_id);
    if(this.description != undefined) {
      tabobj.setAttribute("title", this.description);
    }
    tabobj.textContent = this.title;
    return tabobj;
  }
  
  get panel_element() {
    var panelobj = document.createElement("section");
    panelobj.setAttribute("id", this.panel_id);
    panelobj.setAttribute("class", this.panel_class);
    var panel_hidden = !this.selected;
    panel_hidden = panel_hidden.toString();
    panelobj.setAttribute("aria-hidden", panel_hidden);
    panelobj.setAttribute("aria-labelledby", this.tab_id);
    panelobj.setAttribute("role", "tabpanel");
    var panelheading = document.createElement("h" + this.panel_heading_level);
    panelheading.textContent = this.title;
    panelobj.appendChild(panelheading);
    return panelobj;
  }
}
</script>
